# Forge Headless Mode - Base Configuration Template
# Copy this file and customize it for your project

# REQUIRED: Describe what you want the AI to do
task: "Fix all linting errors in the project"

# Execution mode: "read-only" (analysis only) or "write" (make changes)
mode: write

# REQUIRED: Path to your project workspace
workspace_dir: .

# Logging configuration
logging:
  # Verbosity levels: quiet, normal, verbose, debug
  verbosity: normal

# Safety constraints to prevent runaway execution
constraints:
  # File modification limits
  max_files: 10                    # Maximum number of files that can be modified
  max_lines_changed: 500           # Maximum total lines that can be added/removed
  
  # File access patterns (glob syntax)
  # Only allow modifications to files matching these patterns
  allowed_patterns:
    - "**/*.go"                    # All Go files
    - "**/*.md"                    # All Markdown files
    - "pkg/**/*"                   # Everything in pkg/ directory
  
  # Deny modifications to these patterns (takes precedence over allowed_patterns)
  denied_patterns:
    - "vendor/**"                  # Third-party dependencies
    - ".git/**"                    # Git metadata
    - "node_modules/**"            # Node modules
    - "**/*_generated.*"           # Generated files
    - "**/*.pb.go"                 # Protocol buffer generated files
  
  # Tool restrictions - only allow these tools to be used
  allowed_tools:
    - read_file                    # Read file contents
    - write_file                   # Create or overwrite files
    - apply_diff                   # Make surgical edits to files
    - search_files                 # Search for patterns in files
    - list_files                   # List directory contents
    - execute_command              # Run shell commands
  
  # Resource limits
  max_tokens: 1000000                # Maximum LLM tokens to consume
  timeout: 5m                      # Maximum execution time (5 minutes)

# Quality gates - commands to validate changes before committing
# These run after the AI makes changes but before auto-commit
quality_gates:
  - name: "Go Build"
    command: "go build ./..."
    required: true                 # Execution fails if this gate fails
  
  - name: "Go Test"
    command: "go test ./..."
    required: true
  
  - name: "Go Lint"
    command: "golangci-lint run"
    required: false                # Optional gate - logs results but doesn't fail

# Git integration - automatically commit changes if quality gates pass
git:
  auto_commit: false               # Set to true to enable automatic commits
  commit_message: "chore: automated changes via Forge"
  branch: ""                       # Leave empty to use current branch
  author_name: "anvxl"
  author_email: "anvxl@entr.net.au"

# Artifact generation - execution logs and reports
artifacts:
  enabled: true                    # Generate execution artifacts
  output_dir: ".forge/artifacts"   # Where to save artifacts
  json: true                       # execution.json - Detailed JSON execution log
  markdown: true                   # summary.md - Human-readable markdown summary
  metrics: true                    # metrics.json - Execution metrics for analytics
